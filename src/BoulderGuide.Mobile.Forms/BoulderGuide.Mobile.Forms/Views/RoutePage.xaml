<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:prism="http://prismlibrary.com"
             prism:ViewModelLocator.AutowireViewModel="True"
             xmlns:localViews="clr-namespace:BoulderGuide.Mobile.Forms.Views"
             xmlns:root="clr-namespace:BoulderGuide.Mobile.Forms"
             xmlns:viewModels="clr-namespace:BoulderGuide.Mobile.Forms.ViewModels"
             xmlns:icons="clr-namespace:BoulderGuide.Mobile.Forms.Icons"
             x:Class="BoulderGuide.Mobile.Forms.Views.RoutePage">
   <ContentPage.Title>
      <MultiBinding StringFormat="{}{0} ({1})">
         <Binding Path="Info.Name" />
         <Binding Path="Route.Grade" />
      </MultiBinding>
   </ContentPage.Title>

   <ContentPage.ToolbarItems>
      <ToolbarItem
         Command="{Binding MapCommand}">
         <ToolbarItem.IconImageSource>
            <FontImageSource
               Glyph="{Static icons:MaterialIconFont.Place}"
               FontFamily="{StaticResource Key=MaterialFontFamily}" />
         </ToolbarItem.IconImageSource>
      </ToolbarItem>
   </ContentPage.ToolbarItems>

   <StackLayout>
      <Label Text="{Binding Source={Static root:Strings.AreaInfo}}" />
      <Label Text="{Binding Route.Info}" />

      <CarouselView ItemsSource="{Binding Route.Schemas}"
                    PeekAreaInsets="10"
                    Margin="0, 0, 0, 5">
         <CarouselView.ItemTemplate>
            <DataTemplate>
               <Frame HasShadow="True"
                      BorderColor="LightGray"
                      Padding="5"
                     CornerRadius="5"
                     HorizontalOptions="Center"
                     VerticalOptions="CenterAndExpand">

                  <Grid>
                     <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                     </Grid.ColumnDefinitions>
                     <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                     </Grid.RowDefinitions>
                     <ImageButton Grid.Column="1" WidthRequest="20" HeightRequest="20">
                        <ImageButton.Source>
                           <FontImageSource
                              Color="Gray"
                              Glyph="{Static icons:MaterialIconFont.Fullscreen}"
                              FontFamily="{StaticResource Key=MaterialFontFamily}" />
                        </ImageButton.Source>
                     </ImageButton>
                     <localViews:SchemaView
                        Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Schema="{Binding}"
                        RouteInfo="{Binding Source={RelativeSource AncestorType={x:Type viewModels:RoutePageViewModel}}, Path=Info}"
                        />
                  </Grid>

               </Frame>
            </DataTemplate>
         </CarouselView.ItemTemplate>
      </CarouselView>
   </StackLayout>

</ContentPage>